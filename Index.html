<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ION HUNTER - Game Edukasi Kimia</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            padding: 20px;
        }

        /* Home Page Styles */
        .home-page {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 60px 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .game-title {
    font-size: 4rem;
    font-weight: bold;
    background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
    -webkit-text-fill-color: transparent;
    margin-bottom: 20px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
}
        .subtitle {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 40px;
        }

        .btn {
            padding: 15px 30px;
            margin: 10px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-primary {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            color: white;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        /* Game Page Styles */
        .game-page {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 15px;
            color: white;
        }

        .score-timer {
            display: flex;
            gap: 20px;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .game-controls {
            display: flex;
            gap: 10px;
        }

        .game-area {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
            min-height: 400px;
        }

        .ion-column {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            border: 2px dashed #dee2e6;
        }

        .cation-column {
            border-color: #ff6b6b;
            background: linear-gradient(135deg, #fff5f5, #ffe0e0);
        }

        .anion-column {
            border-color: #4ecdc4;
            background: linear-gradient(135deg, #f0ffff, #e0f8f8);
        }

        .drop-area {
            background: linear-gradient(135deg, #fff9e6, #ffedcc);
            border: 3px dashed #ffc107;
            border-radius: 15px;
            padding: 20px;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .ion-item {
            background: white;
            border-radius: 10px;
            padding: 15px 20px;
            margin: 5px 0;
            cursor: move;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            font-size: 1.2rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .ion-item:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .cation {
            color: #ff6b6b;
            border-left: 5px solid #ff6b6b;
        }

        .anion {
            color: #4ecdc4;
            border-left: 5px solid #4ecdc4;
        }

        .dropped-ion {
    margin: 5px 0;
    font-size: 1.1rem;
    padding: 8px 16px;
    border-radius: 8px;
    background: #f1f3f4;
    box-shadow: 0 1px 4px rgba(0,0,0,0.08);
    display: inline-block;
}

        .check-btn {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s ease;
        }

        .check-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 30px;
            border-radius: 20px;
            width: 80%;
            max-width: 600px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal h2 {
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        .quiz-option {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            background: #e9ecef;
            border-color: #adb5bd;
        }

        .quiz-option.correct {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }

        .quiz-option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }

        /* Rules Page */
        .rules-page {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-height: 80vh;
            overflow-y: auto;
        }

        .rules-page h2 {
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        .rules-page ol {
            line-height: 1.8;
            margin-bottom: 30px;
        }

        .rules-page li {
            margin-bottom: 10px;
        }

        /* End Page */
        .end-page {
            display: none;
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 60px 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .final-score {
            font-size: 3rem;
            color: #28a745;
            font-weight: bold;
            margin: 20px 0;
        }

        .motivation-text {
            font-size: 1.3rem;
            color: #666;
            margin: 20px 0;
            font-style: italic;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .game-area {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .game-title {
                font-size: 2.5rem;
            }
            
            .modal-content {
                width: 95%;
                margin: 5% auto;
                padding: 20px;
            }
        }

        .help-count {
            background: #ffc107;
            color: #333;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
            margin-left: 5px;
        }

        .timer.warning {
            color: #dc3545;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Home Page -->
        <div id="homePage" class="home-page">
            <h1 class="game-title">üß™ ION HUNTER</h1>
            <p class="subtitle">Game Edukasi Ikatan Ionik untuk Pembelajaran Kimia</p>
            <button onclick="startGame()">Mulai Permainan</button>üéÆ Mulai Permainan</button>
            <button onclick="showRules()">Peraturan Permainan</button>üìñ Peraturan Permainan</button>
        </div>

        <!-- Rules Page -->
        <div id="rulesPage" class="rules-page">
            <h2>üìò PERATURAN PERMAINAN</h2>
            <ol>
                <li>Tujuan utama adalah mencocokkan kation dan anion untuk membentuk senyawa <strong>netral secara listrik</strong>.</li>
                <li>Gunakan <strong>drag-and-drop</strong> untuk menyatukan satu atau lebih ion dari kolom kiri (kation) dan kanan (anion).</li>
                <li>Setelah dipasangkan, klik tombol <strong>Periksa</strong> untuk mengecek apakah muatan sudah setara.</li>
                <li>Terdapat <strong>timer 10 detik</strong> untuk menyelesaikan tiap pencocokan.</li>
                <li>Jika pasangan benar, <strong>soal pilihan ganda</strong> akan muncul berdasarkan pasangan ion yang terbentuk.</li>
                <li>Pemain mendapat <strong>3 kali kesempatan bantuan</strong>, yang memberikan petunjuk jumlah ion yang dibutuhkan.</li>
                <li>Tombol <strong>Reset</strong> akan mengulang seluruh permainan dari awal.</li>
                <li>Game ini dirancang untuk memperkuat pemahaman tentang muatan ion, rumus senyawa ionik, dan konsep netralitas listrik.</li>
            </ol>
            <button class="btn btn-primary" onclick="showHome()">üè† Kembali ke Beranda</button>
        </div>

        <!-- Game Page -->
        <div id="gamePage" class="game-page">
            <div class="game-header">
                <div class="score-timer">
                    <div>üìä Skor: <span id="score">0</span></div>
                    <div>‚è± Waktu: <span id="timer">10</span>s</div>
                </div>
                <div class="game-controls">
                    <button class="btn btn-secondary" onclick="useHelp()">üß† Bantuan <span class="help-count" id="helpCount">3</span></button>
                    <button class="btn btn-secondary" onclick="resetGame()">üîÅ Reset</button>
                    <button class="btn btn-secondary" onclick="showHome()">üè† Home</button>
                </div>
            </div>

            <div class="game-area">
                <div class="ion-column cation-column">
                    <h3 style="text-align: center; color: #ff6b6b; margin-bottom: 15px;">‚ö° KATION (+)</h3>
                    <div id="cationColumn"></div>
                </div>

                <div class="drop-area" id="dropArea">
                    <h3 style="color: #ffc107; margin-bottom: 15px;">üéØ Area Pencocokan</h3>
                    <div id="droppedIons"></div>
                    <button class="check-btn" onclick="checkAnswer()">‚úÖ Periksa Pasangan</button>
                </div>

                <div class="ion-column anion-column">
                    <h3 style="text-align: center; color: #4ecdc4; margin-bottom: 15px;">‚ö° ANION (-)</h3>
                    <div id="anionColumn"></div>
                </div>
            </div>
        </div>

        <!-- End Page -->
        <div id="endPage" class="end-page">
            <h1 style="color: #28a745; margin-bottom: 20px;">üéâ Permainan Selesai!</h1>
            <div class="final-score" id="finalScore">0</div>
            <p class="motivation-text">"Hebat! Terus eksplorasi dunia ikatan kimia!"</p>
            <button class="btn btn-primary" onclick="showHome()">üè† Kembali ke Halaman Awal</button>
        </div>
    </div>

    <!-- Result Modal -->
    <div id="resultModal" class="modal">
        <div class="modal-content">
            <h2 id="resultTitle"></h2>
            <p id="resultMessage"></p>
            <div id="quizSection" style="display: none;">
                <h3 style="margin: 20px 0;">üìù Soal Kuis:</h3>
                <p id="quizQuestion"></p>
                <div id="quizOptions"></div>
            </div>
            <button class="btn btn-primary" onclick="closeModal()" style="margin-top: 20px;">Lanjutkan</button>
        </div>
    </div>

    <script>
        // Game data
        const cations = [
            {symbol: 'Na‚Å∫', charge: 1, name: 'Natrium'},
            {symbol: 'K‚Å∫', charge: 1, name: 'Kalium'},
            {symbol: 'Mg¬≤‚Å∫', charge: 2, name: 'Magnesium'},
            {symbol: 'Ca¬≤‚Å∫', charge: 2, name: 'Kalsium'},
            {symbol: 'Al¬≥‚Å∫', charge: 3, name: 'Aluminium'},
            {symbol: 'Fe¬≥‚Å∫', charge: 3, name: 'Besi(III)'},
            {symbol: 'Zn¬≤‚Å∫', charge: 2, name: 'Seng'}
        ];

        const anions = [
            {symbol: 'Cl‚Åª', charge: -1, name: 'Klorida'},
            {symbol: 'Br‚Åª', charge: -1, name: 'Bromida'},
            {symbol: 'NO‚ÇÉ‚Åª', charge: -1, name: 'Nitrat'},
            {symbol: 'SO‚ÇÑ¬≤‚Åª', charge: -2, name: 'Sulfat'},
            {symbol: 'CO‚ÇÉ¬≤‚Åª', charge: -2, name: 'Karbonat'},
            {symbol: 'PO‚ÇÑ¬≥‚Åª', charge: -3, name: 'Fosfat'},
            {symbol: 'OH‚Åª', charge: -1, name: 'Hidroksida'}
        ];

        const quizData = [
            {
                compound: 'NaCl',
                question: 'Apa nama senyawa yang terbentuk dari pasangan Na‚Å∫ dan Cl‚Åª?',
                options: ['Natrium klorida', 'Natrium klorida(II)', 'Natrium diklorida', 'Natrium monoklorida'],
                correct: 0
            },
            {
                compound: 'MgCl‚ÇÇ',
                question: 'Rumus kimia yang benar dari senyawa ionik antara Mg¬≤‚Å∫ dan Cl‚Åª adalah ...',
                options: ['MgCl', 'MgCl‚ÇÇ', 'Mg‚ÇÇCl', 'MgCl‚ÇÉ'],
                correct: 1
            },
            {
                compound: 'AlPO‚ÇÑ',
                question: 'Berapa perbandingan ion yang dibutuhkan untuk membentuk senyawa netral antara Al¬≥‚Å∫ dan PO‚ÇÑ¬≥‚Åª?',
                options: ['2 : 3', '3 : 2', '1 : 1', '2 : 1'],
                correct: 2
            },
            {
                compound: 'CaSO‚ÇÑ',
                question: 'Senyawa yang terbentuk dari pasangan Ca¬≤‚Å∫ dan SO‚ÇÑ¬≤‚Åª adalah ...',
                options: ['Kalsium(II) sulfat', 'Kalsium disulfat', 'Kalsium sulfat', 'Kalsium trisulfat'],
                correct: 2
            },
            {
                compound: 'KNO‚ÇÉ',
                question: 'Nama senyawa KNO‚ÇÉ yang terbentuk dari K‚Å∫ dan NO‚ÇÉ‚Åª adalah ...',
                options: ['Kalium nitrit', 'Kalium nitrida', 'Kalium nitrat', 'Kalium nitroksida'],
                correct: 2
            }
        ];

        // Game state
        let gameState = {
            score: 0,
            timer: 10,
            helpCount: 3,
            currentCations: [],
            currentAnions: [],
            droppedCations: [],
            droppedAnions: [],
            timerInterval: null
        };

        // Initialize game
        function initGame() {
            // Reset game state
            gameState.score = 0;
            gameState.timer = 10;
            gameState.helpCount = 3;
            gameState.droppedCations = [];
            gameState.droppedAnions = [];
            
            // Generate random ions
            gameState.currentCations = getRandomItems(cations, 5);
            gameState.currentAnions = getRandomItems(anions, 5);
            
            // Update UI
            updateUI();
            generateIons();
            startTimer();
        }

        function getRandomItems(array, count) {
            const shuffled = [...array].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }

        function generateIons() {
            // Generate cations
            const cationColumn = document.getElementById('cationColumn');
            cationColumn.innerHTML = '';
            gameState.currentCations.forEach((ion, index) => {
                const ionDiv = document.createElement('div');
                ionDiv.className = 'ion-item cation';
                ionDiv.textContent = ion.symbol;
                ionDiv.draggable = true;
                ionDiv.dataset.type = 'cation';
                ionDiv.dataset.index = index;
                ionDiv.addEventListener('dragstart', handleDragStart);
                cationColumn.appendChild(ionDiv);
            });

            // Generate anions
            const anionColumn = document.getElementById('anionColumn');
            anionColumn.innerHTML = '';
            gameState.currentAnions.forEach((ion, index) => {
                const ionDiv = document.createElement('div');
                ionDiv.className = 'ion-item anion';
                ionDiv.textContent = ion.symbol;
                ionDiv.draggable = true;
                ionDiv.dataset.type = 'anion';
                ionDiv.dataset.index = index;
                ionDiv.addEventListener('dragstart', handleDragStart);
                anionColumn.appendChild(ionDiv);
            });
        }

        function handleDragStart(e) {
            e.dataTransfer.setData('text/plain', JSON.stringify({
                type: e.target.dataset.type,
                index: e.target.dataset.index,
                symbol: e.target.textContent
            }));
        }

        // Setup drop area
        const dropArea = document.getElementById('dropArea');
        dropArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropArea.style.backgroundColor = '#fff3cd';
        });

        dropArea.addEventListener('dragleave', (e) => {
            dropArea.style.backgroundColor = '';
        });

        dropArea.addEventListener('drop', (e) => {
            e.preventDefault();
            dropArea.style.backgroundColor = '';
            
            const data = JSON.parse(e.dataTransfer.getData('text/plain'));
            const droppedIonsDiv = document.getElementById('droppedIons');
            
            // Create dropped ion element
            const droppedIon = document.createElement('div');
            droppedIon.className = `ion-item dropped-ion ${data.type}`;
            droppedIon.textContent = data.symbol;
            droppedIonsDiv.appendChild(droppedIon);
            
            // Add to game state
            if (data.type === 'cation') {
                gameState.droppedCations.push(gameState.currentCations[data.index]);
            } else {
                gameState.droppedAnions.push(gameState.currentAnions[data.index]);
            }
        });

        function checkAnswer() {
            if (gameState.droppedCations.length === 0 || gameState.droppedAnions.length === 0) {
                showResult(false, 'Silakan pilih minimal satu kation dan satu anion!');
                return;
            }

            // Calculate total charges
            const totalCationCharge = gameState.droppedCations.reduce((sum, ion) => sum + ion.charge, 0);
            const totalAnionCharge = gameState.droppedAnions.reduce((sum, ion) => sum + Math.abs(ion.charge), 0);

            if (totalCationCharge === totalAnionCharge) {
                // Correct answer
                gameState.score += 10;
                const compound = generateCompoundFormula();
                showResult(true, `Benar! Senyawa terbentuk: ${compound}`, compound);
                clearDropArea();
                resetTimer();
            } else {
                // Wrong answer
                showResult(false, 'Muatan belum seimbang. Coba lagi.');
                clearDropArea();
            }
            
            updateUI();
        }

        function generateCompoundFormula() {
            // Simple compound generation for demo
            if (gameState.droppedCations.length === 1 && gameState.droppedAnions.length === 1) {
                const cation = gameState.droppedCations[0];
                const anion = gameState.droppedAnions[0];
                
                // Calculate subscripts
                const cationCount = Math.abs(anion.charge);
                const anionCount = Math.abs(cation.charge);
                
                let formula = cation.symbol.replace(/[‚Å∫¬≤¬≥]/g, '');
                if (cationCount > 1) formula += cationCount;
                
                let anionSymbol = anion.symbol.replace(/[‚Åª¬≤¬≥]/g, '');
                if (anionCount > 1) {
                    if (anionSymbol.length > 2) {
                        formula += `(${anionSymbol})${anionCount}`;
                    } else {
                        formula += anionSymbol + anionCount;
                    }
                } else {
                    formula += anionSymbol;
                }
                
                return formula;
            }
            return 'Senyawa Ionik';
        }

        function showResult(isCorrect, message, compound = null) {
            const modal = document.getElementById('resultModal');
            const title = document.getElementById('resultTitle');
            const messageEl = document.getElementById('resultMessage');
            const quizSection = document.getElementById('quizSection');
            
            title.textContent = isCorrect ? '‚úÖ Benar!' : '‚ùå Salah!';
            title.style.color = isCorrect ? '#28a745' : '#dc3545';
            messageEl.textContent = message;
            
            if (isCorrect && compound) {
                // Show quiz
                const quiz = quizData.find(q => q.compound.includes(compound.replace(/[‚ÇÄ‚ÇÅ‚ÇÇ‚ÇÉ‚ÇÑ‚ÇÖ‚ÇÜ‚Çá‚Çà‚Çâ]/g, ''))) || quizData[0];
                showQuiz(quiz);
            } else {
                quizSection.style.display = 'none';
            }
            
            modal.style.display = 'block';
        }

        function showQuiz(quiz) {
            const quizSection = document.getElementById('quizSection');
            const questionEl = document.getElementById('quizQuestion');
            const optionsEl = document.getElementById('quizOptions');
            
            questionEl.textContent = quiz.question;
            optionsEl.innerHTML = '';
            
            quiz.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'quiz-option';
                optionDiv.textContent = `${String.fromCharCode(65 + index)}. ${option}`;
                optionDiv.onclick = () => selectQuizOption(optionDiv, index === quiz.correct);
                optionsEl.appendChild(optionDiv);
            });
            
            quizSection.style.display = 'block';
        }

        function selectQuizOption(element, isCorrect) {
            // Disable all options
            const options = document.querySelectorAll('.quiz-option');
            options.forEach(opt => {
                opt.onclick = null;
                opt.style.cursor = 'default';
            });
            
            // Show result
            element.className += isCorrect ? ' correct' : ' incorrect';
            
            if (isCorrect) {
                gameState.score += 5;
                updateUI();
            }
        }

        function clearDropArea() {
            document.getElementById('droppedIons').innerHTML = '';
            gameState.droppedCations = [];
            gameState.droppedAnions = [];
        }

        function closeModal() {
            document.getElementById('resultModal').style.display = 'none';
        }

        function startTimer() {
            gameState.timerInterval = setInterval(() => {
                gameState.timer--;
                updateUI();
                
                if (gameState.timer <= 3) {
                    document.getElementById('timer').className = 'timer warning';
                }
                
                if (gameState.timer <= 0) {
                    clearInterval(gameState.timerInterval);
                    showResult(false, 'Waktu habis! Coba lagi.');
                    resetTimer();
                    clearDropArea();
                }
            }, 1000);
        }

        function resetTimer() {
            clearInterval(gameState.timerInterval);
            gameState.timer = 10;
            document.getElementById('timer').className = '';
            startTimer();
        }

        function updateUI() {
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('timer').textContent = gameState.timer;
            document.getElementById('helpCount').textContent = gameState.helpCount;
        }

        function useHelp() {
            if (gameState.helpCount > 0) {
                gameState.helpCount--;
                updateUI();
                
                // Show hint
                const hint = 'Petunjuk: Pastikan total muatan positif sama dengan total muatan negatif!';
                alert(hint);
            } else {
                alert('Bantuan sudah habis!');
            }
        }

        function resetGame() {
            clearInterval(gameState.timerInterval);
            clearDropArea();
            initGame();
        }

        function startGame() {
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('rulesPage').style.display = 'none';
            document.getElementById('endPage').style.display = 'none';
            document.getElementById('gamePage').style.display = 'block';
            initGame();
        }

        function showRules() {
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('gamePage').style.display = 'none';
            document.getElementById('endPage').style.display = 'none';
            document.getElementById('rulesPage').style.display = 'block';
        }

        function showHome() {
            clearInterval(gameState.timerInterval);
            document.getElementById('gamePage').style.display = 'none';
            document.getElementById('rulesPage').style.display = 'none';
            document.getElementById('endPage').style.display = 'none';
            document.getElementById('homePage').style.display = 'block';
        }

        function showEndGame() {
            clearInterval(gameState.timerInterval);
            document.getElementById('gamePage').style.display = 'none';
            document.getElementById('rulesPage').style.display = 'none';
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('endPage').style.display = 'block';
            document.getElementById('finalScore').textContent = `Skor Akhir: ${gameState.score}`;
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('resultModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // Initialize the game when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Show home page initially
            showHome();
        });
            